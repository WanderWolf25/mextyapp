DOCUMENTO: Lógica general del backend (Pseudocódigo)

Propósito:
    Este documento describe la lógica del backend usando pseudocódigo.
    No representa código ejecutable.
    La intención es encapsular conceptos como si fueran código
    para mejorar la claridad y la comprensión del sistema.


SECCIÓN: Roles del sistema

Rol: Comprador
    Puede:
        Autenticarse: registrarse / iniciar sesión / cerrar sesión.
        Ver catálogo: buscar, filtrar, ver mapa por estados, ver detalle de producto.
        Ver perfil público del artesano.
        Marcar “Estoy interesado” y enviar preguntas predefinidas (crear InterestRequest).
        Ver estado de sus intereses enviados.
        Reportar producto/usuario (si lo contemplas desde MVP).
        Escribir reseña/calificación solo si existe compra confirmada (si lo planeas)
        - (pendiente de definir)

    No puede:
        Publicar/editar/eliminar productos.
        Aprobar artesanos o publicaciones.
        Abrir chat libre por su cuenta: solo pre-chat (preguntas) y chat completo únicamente si está autorizado (por compra o autorización).
        Ver datos privados de otros usuarios (teléfono, email, etc.) ni conversaciones ajenas.
        - (pendiente de definir)


Rol: Artesano (Vendedor)
    Estados:
        Pendiente, Aprovado

    Puede:
        - (pendiente de definir)
        Todo lo del comprador (porque también compra).
        Crear/editar sus productos en estado borrador (DRAFT) y enviarlos a revisión (PENDING_APPROVAL).
        Ver y responder intereses recibidos (respuestas al formulario/preguntas).
        Gestionar su perfil de artesano (bio, ubicación, etc.).
        Chat completo solo si está autorizado.
        (Futuro Fase 2) Ver sus órdenes y estado de pagos (solo lectura del estado).
        (Futuro Fase 3) Gestionar envíos de sus órdenes (crear guía, marcar enviado, etc.).

    No puede:
        Aprobarse a sí mismo como artesano.
        Aprobar/rechazar publicaciones (eso es soporte/admin).
        Ver intereses/conversaciones de otros artesanos.
        Enviar links/datos de fuga por chat (regla global de moderación).
        Alterar estados de pago/retenciones (escrow) ni forzar liberacione
        - (pendiente de definir)


Rol: Soporte
    Puede:Aprobar/rechazar artesanos (cambiar ArtisanProfile.verificationStatus con razón).
        Aprobar/rechazar publicaciones (cambiar Product.status de PENDING_APPROVAL a PUBLISHED/REJECTED con razón).
        Ver conversaciones para moderación y soporte (idealmente read-only).
        Bloquear/desbloquear usuarios según política (cambiar User.status).
        Gestionar incidencias: reportes, disputas iniciales, tickets.
        (Futuro Fase 2) Ver información de pago limitada (estado, id de transacción), sin mover dinero.
        (Futuro Fase 3) Ver estado de envíos e incidencias.
        - (pendiente de definir)

    No puede:
        Borrar/editar mensajes (integridad de evidencia).
        Cambiar reglas del sistema / configuración global.
        Administrar roles de otros usuarios (si quieres que eso sea exclusivo de admin).
        Ejecutar acciones críticas de dinero (capturar, liberar, reembolsar) salvo que explícitamente lo decidas.
       - (pendiente de definir)


Rol: Administrador
    Puede:
    Todo lo de soporte.
    Administrar roles y cuentas (asignar/quitar roles, crear soporte).
    Ver auditoría completa (quién aprobó qué, quién bloqueó a quién).
    Configurar reglas del sistema (catálogos, políticas, parámetros).
    (Futuro Fase 2) Acciones de pagos: resolver disputas, liberar/retener según reglas, reembolsos.
    (Futuro Fase 3) Control total de logística y flujos de envío.
        - (pendiente de definir)

    No puede:
         Idealmente: nada (es “superusuario”), salvo restricciones que tú impongas por compliance.
        - (pendiente de definir)
